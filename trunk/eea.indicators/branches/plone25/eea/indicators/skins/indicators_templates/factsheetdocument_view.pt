<html xmlns="http://www.w3.org/1999/xhtml"
  xml:lang="en"
  lang="en"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  metal:use-macro="here/main_template/macros/master"
  i18n:domain="plone">

  <head><title></title></head>

  <body>
    <metal:fill fill-slot="main">
      <metal:main_macro define-macro="main"
        tal:define="portal_type python:here.getPortalTypeName().lower().replace(' ', '_');
        base_macros here/base/macros;
        view_template python:'%s_view' % portal_type;
        view_macros python:path('here/%s/macros|nothing' % view_template);
        header_macro view_macros/header | header_macro | base_macros/header;">

        <metal:use_header use-macro="header_macro" />

        <tal:block define="field python:context.getField('file');
          accessor python:field.getAccessor(context)();
          icon accessor/getBestIcon | nothing;
          filename accessor/filename | nothing;
          size accessor/get_size | python:accessor and len(accessor) or 0;"
          condition="filename">
          <dt i18n:translate="dataset_download_link">Uploaded file</dt>
          <dd>
            <a href="" tal:attributes="href string:${context/absolute_url}/at_download/file">
              <img tal:condition="icon" src=""
                tal:attributes="src string:${context/portal_url}/$icon"/>
              <span tal:content="filename" />
            </a>
            (<span tal:content="python:context.lookupMime(field.getContentType(context))">ContentType</span>
            <tal:size content="python:'%sKb' % (size / 1024)">0Kb</tal:size>)
          </dd>
        </tal:block>

      </metal:main_macro>
    </metal:fill>
  </body>
</html>
