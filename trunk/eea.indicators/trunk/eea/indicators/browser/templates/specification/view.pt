<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="indicators">

      <!-- #TODO: i18n:translate -->

  <body>
    <div metal:fill-slot="main">
      <metal:main_macro define-macro="main"
                        tal:define="portal_type python:here.getPortalTypeName().lower().replace(' ', '_');
                                    base_macros here/base/macros;
                                    view_template python:'%s_view' % portal_type;
                                    view_macros python:path('here/%s/macros|nothing' % view_template);
                                    header_macro view_macros/header | header_macro | base_macros/header;">

        <img src="Specification.png"
             id="specification_icon"
             tal:attributes="src string:${context/portal_url}/Specification.png"
             class="specificationIcon" />

        <metal:use_header use-macro="header_macro" />

        <div metal:use-macro="here/portlet_themes_object/macros/portlet" />
        <div metal:use-macro="here/portlet_toc/macros/portlet" />

        <metal:versions use-macro="here/portlet_versions/macros/versions">
          <metal:new fill-slot="old" />
        </metal:versions>

        <tal:assessment_versions define="assessments context/@@assessment_versions;
                                         published python:assessments['published'];
                                         draft python:assessments['draft']">
          <a name="versions"></a>
          <img src="Assessment.png"
               id="assessment_icon"
               tal:attributes="src string:${context/portal_url}/Assessment.png"
               class="specificationIcon" />

          <h2>Assessment versions</h2>
          <h5>Published (reviewed and quality assured)</h5>
          <ul>
            <li tal:condition="not:published">No published assessments</li>
            <li tal:repeat="assessment published">
              <a tal:attributes="href assessment/absolute_url" tal:content="assessment/Title">
                Assessment title here
              </a>
            </li>
          </ul>

          <h5>Draft (not yet published - not quality assured)</h5>
          <ul>
            <li tal:condition="not:draft">No drafts available</li>
            <li tal:repeat="assessment draft">
              <a tal:attributes="href assessment/absolute_url" tal:content="assessment/Title">
                Assessment title here
              </a>
            </li>
          </ul>
        </tal:assessment_versions>

          <a name="rationale"></a>
          <img src="RationaleReference.png"
               id="rationalereference_icon"
               tal:attributes="src string:${context/portal_url}/RationaleReference.png"
               class="specificationIcon" />

          <h2>Rationale</h2>
          <tal:justification define="rationale_justification context/rationale_justification">
            <h3>Justification for indicator selection:</h3>
            <p tal:replace="structure rationale_justification"
               tal:condition="rationale_justification">Rationale justification</p>
            <p tal:condition="not:rationale_justification">No rationale/justification has been specified</p>
          </tal:justification>

          <h3>Scientific references:</h3>
          <ul tal:define="refs python:context.getFolderContents(contentFilter={'portal_type':'RationaleReference'})">
            <li tal:condition="not:refs">No rationale references available</li>
            <li tal:repeat="ref refs">
              <a href="" tal:attributes="href ref/getRemoteUrl" tal:content="ref/Title">Ref title</a>
              <p tal:replace="structure ref/Description" />
            </li>
          </ul>

          <a name="definition"></a>
          <img src="IMSDefinition.png"
               id="definition_icon"
               tal:attributes="src string:${context/portal_url}/IMSDefinition.png"
               class="specificationIcon" />

          <h2>Indicator definition</h2>
          <tal:definition define="definition context/getDefinition">
            <p tal:condition="not:definition">No definition has been specified</p>
            <p tal:condition="definition" tal:replace="structure definition"></p>
          </tal:definition>

          <h3>Units</h3>
          <tal:units define="units context/getUnits">
            <p tal:condition="not:units">No units have been specified</p>
            <p tal:condition="units" tal:replace="structure units"></p>
          </tal:units>

          <a name="policy_context"></a>
          <img src="PolicyContext.png"
               id="policycontext_icon"
               tal:attributes="src string:${context/portal_url}/PolicyContext.png"
               class="specificationIcon" />

          <h2>Policy Context and targets</h2>

          <h3>Context description</h3>
          <tal:policy_description define="policy_description context/getPolicy_context_description">
            <p tal:condition="policy_description" tal:content="structure policy_description"></p>
            <p tal:condition="not:policy_description">No context has been specified</p>
          </tal:policy_description>

          <h3>Targets</h3>
          <tal:policy_targets define="policy_targets context/getPolicy_context_targets">
            <p tal:condition="policy_targets" tal:content="structure policy_targets"></p>
            <p tal:condition="not:policy_targets">No targets have been specified</p>
          </tal:policy_targets>

          <tal:policy_documents define="policy_documents context/getRelated_policy_documents">
            <h3>Related policy documents</h3>
            <ul tal:condition="policy_documents">
              <li tal:repeat="doc policy_documents">
                <a href="" tal:attributes="href doc/getRemoteUrl" tal:content="doc/Title">
                  Doc title here
                </a>
                <div tal:content="structure doc/Description" />
              </li>
            </ul>
            <p tal:condition="not:policy_documents">No related policy documents have been specified</p>
          </tal:policy_documents>

          <a name="policy_questions"></a>
          <tal:policy_question define="policy_questions context/@@policy_questions;
                                       all_questions python:policy_questions['all'];
                                       key_questions python:policy_questions['key_questions'];
                                       questions python:policy_questions['questions']">
          <tal:question repeat="question all_questions">
            <img src="PolicyQuestion.png"
                 id="policyquestion_icon"
                 tal:attributes="src string:${context/portal_url}/PolicyQuestion.png"
                 class="specificationIcon" />
            <h2 tal:condition="question/getIs_key_question">Key policy question</h2>
            <h2 tal:condition="not:question/getIs_key_question">Specific policy question</h2>

            <h3 tal:content="question/Title">Question title</h3>
          </tal:question>
          </tal:policy_question>

          <a name="methodology"></a>
          <img src="IMSMethodology.png"
               id="methodology_icon"
               tal:attributes="src string:${context/portal_url}/IMSMethodology.png"
               class="specificationIcon" />

          <h2>Methodology</h2>

          <tal:methodology define="methodology context/getMethodology">
            <h3>Methodology for indicator calculation</h3>
            <p tal:condition="methodology" tal:content="structure methodology" />
            <p tal:condition="not:methodology">No methodology for indicator calculation has been specified</p>
          </tal:methodology>

          <tal:methodology_gapfilling define="methodology_gapfilling context/getMethodology_gapfilling">
            <h3>Methodology for gap filling</h3>
            <p tal:condition="methodology_gapfilling" tal:content="structure methodology_gapfilling" />
            <p tal:condition="not:methodology_gapfilling">
              No methodology for gap filling has been specified.
              Probably this info has been added together with indicator calculation.</p>
          </tal:methodology_gapfilling>

          <h3>Methodology references</h3>
          <tal:methodology_references define="references python:context.getFolderContents(contentFilter={'portal_type':'MethodologyReference'})">
            <ul tal:condition="references">
              <li tal:repeat="ref references">
                <a href="" tal:attributes="href ref/getRemoteUrl" tal:content="ref/Title">Ref</a>
                <p tal:replace="structure ref/Description" />
              </li>
            </ul>
            <p tal:condition="not:references">No methodology references available.</p>
          </tal:methodology_references>

          <a name="dataspecs"></a>
          <img src="DataSpecification.png"
               id="dataspecification_icon"
               tal:attributes="src string:${context/portal_url}/DataSpecification.png"
               class="specificationIcon" />
          <!-- #3273 -->
          <h2>Data specifications</h2>
			<ul>
				<li tal:repeat="data context/getRelatedItems">
					<a href=""
					   tal:attributes="href string:${context/portal_url}/data-and-maps/data/ds_resolveuid/${data/@@getLatestVersionLink}"
					   tal:content="data/@@getLatestVersionLink">Dataset title</a>
				</li>
				<li tal:repeat="data context/getSpecification_data">
					<a href="" tal:attributes="href data/absolute_url" tal:content="data/Title">Dataset title</a>
					<div tal:content="structure data/Description" />
				</li>
			</ul>

			<a name="uncertainties"></a>
			<h2>Uncertainties</h2>

			<h3>Methodology uncertainty</h3>
			<p tal:replace="structure context/getMethodology_uncertainty"></p>

			<h3>Data sets uncertainty</h3>
			<p tal:replace="structure context/getData_uncertainty"></p>

			<h3>Rationale uncertainty</h3>
			<p tal:replace="structure context/getRationale_uncertainty"></p>

			<a name="further_work"></a>
			<h2>Further work</h2>
			<tal:def tal:define="works context/get_work; short works/short; long works/long">
				<h3>Short term work</h3>
				<p>Work specified here requires to be completed within 1 year from now.</p>
				<div tal:repeat="work short">
					<h4>Work description</h4>
					<p tal:replace="structure work/Description"></p>
					<h4>Resource needs</h4>
					<p tal:replace="structure work/getNeeds"></p>
					<h4>Status</h4>
					<p tal:replace="structure work/getStatus"></p>
					<h4>Deadline</h4>
					<p tal:replace="structure work/getDue_date"></p>
				</div>
				<h3>Long term work</h3>
				<div tal:repeat="work long">
					<h4>Work description</h4>
					<p tal:replace="structure work/Description"></p>
					<h4>Resource needs</h4>
					<p tal:replace="structure work/getNeeds"></p>
					<h4>Status</h4>
					<p tal:replace="structure work/getStatus"></p>
					<h4>Deadline</h4>
					<p tal:replace="structure work/getDue_date"></p>
				</div>

			</tal:def>

			<metal:versions use-macro="here/portlet_versions/macros/versions">
				<metal:new fill-slot="new" />
			</metal:versions>

			<a name="metadata"></a>
			<h2>General metadata</h2>

			<div class='headed-box'>
				<h3>Responsability and ownership</h3>

				<h4>EEA Contact Info:</h4>
				<div tal:content="structure context/getContact">...</div>

				<h4>Ownership</h4>
				<ul>
					<li tal:repeat="info context/getOwnership" >
						<a tal:content="python:context.getOrganisationName(info).Title" tal:attributes="href info">EEA</a>
					</li>
				</ul>

			</div>

			<div class='headed-box'>
				<h3>Identification</h3>
				<div class="wrapper" >
					<div tal:define="codes context/getCodes">
						<strong>CSI Code</strong>
						<div tal:repeat="code codes" tal:content="string:${code/set} ${code/code}">
							CSI 001
						</div>
					</div>
					<strong>Specification</strong>
					<div>Link: <a href="" tal:attributes="href context/absolute_url"
							tal:content="context/getId">ISpecification1235</a>
					</div>
					<div>
						Version id: <span tal:content="context/getVersion_id" />
					</div>

					<div>
						First draft created: <span tal:content="context/creation_date">creation date</span>
					</div>

					<div>
						Publish date: <span tal:content="context/effective_date">effective date</span>
					</div>
					<div>
						Last modified: <span tal:content="context/modified">Modified date</span>
					</div>
				</div>
			</div>

			<div class='headed-box'>
				<h3>Classification</h3>
				<div class="visualClear"><!-- --></div>
				<strong>DPSIR</strong>: <span tal:replace="context/getDpsir" /><br/>
				<strong>Typology</strong>: <span tal:replace="context/getTypology" /><br/>
				<!-- <strong>EEA Themes</strong>: -->
				<!-- <ul> -->
					<!-- 	<li tal:repeat="theme context/getThemes" tal:content="theme" /> -->
					<!-- </ul> -->
			</div>

      </metal:main_macro>
		</div>
	</body>
</html>
