<tal:def tal:define="submit_handler string:simple_edit; ">
	<tal:def tal:define="region_name string:policy_context_area;
		region_update_handler string:fragment_policy_context;
		imsutils nocall:context/@@indicator_utils;
		related_view nocall:context/@@related_items;
		">

		<metal:macro metal:use-macro="context/indicators_macros/macros/active_region">
			<metal:slot metal:fill-slot="content">
				<div class="logic_group">

					<h2 id="policy_context">Policy Context and targets</h2>

					<h3>Context description</h3>
					<tal:def tal:define="fieldname string:policy_context_description; fieldset string:PolicyContext">
						<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
							<metal:slot metal:fill-slot="content">
								<div tal:condition="python:not imsutils.field_has_value('policy_context_description', context)"
									class="placeholder">
									Please fill in
								</div>
								<p tal:replace="structure context/getPolicy_context_description"></p>
							</metal:slot>
							<metal:slot metal:fill-slot="extra-metadata">
								<div class="width">800</div>
								<div class="height">435</div>
							</metal:slot>
						</metal:macro>
					</tal:def>


					<h3>Targets</h3>
					<tal:def tal:define="fieldname string:policy_context_targets; fieldset string:PolicyContext">
						<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
							<metal:slot metal:fill-slot="content">
								<div tal:condition="python:not imsutils.field_has_value('policy_context_targets', context)"
									class="placeholder">
									Please fill in
								</div>
								<p tal:replace="structure context/getPolicy_context_targets"></p>
							</metal:slot>
							<metal:slot metal:fill-slot="extra-metadata">
								<div class="width">800</div>
								<div class="height">435</div>
							</metal:slot>
						</metal:macro>
					</tal:def>

					<h3>Related policy documents</h3>
					<!-- #TODO: replace Edit related_policy_documents with Edit relatedItems -->

					<tal:def tal:define="
						fieldname string:relatedItems;
						values python:related_view('PolicyDocumentReference');
						default_selected_tab string:policy-document-reference;
						">
						<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
							<metal:slot metal:fill-slot="content">
								<div tal:condition="python:not values"
									class="placeholder">
									Please fill in
								</div>
								<ul>
									<li tal:repeat="ref values">
										<a href="" tal:attributes="href ref/absolute_url">
											<span tal:replace="ref/Title" />
										</a>
									</li>
								</ul>
							</metal:slot>
							<metal:slot metal:fill-slot="control">
								<div class="control">
									<a href="" 
										tal:attributes="onclick string:return open_relations_widget('active_field-$fieldname')">Edit</a>
								</div>
							</metal:slot>
							<metal:slot metal:fill-slot="extra-metadata">
								<div class="disable_handler">true</div>
							</metal:slot>
							
						</metal:macro>
					</tal:def>

				</div>
			</metal:slot>
		</metal:macro>

	</tal:def>
</tal:def>
