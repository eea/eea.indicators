<tal:def tal:define="submit_handler string:simple_edit; ">
	<tal:def tal:define="region_name string:metadata_area;
		region_update_handler string:fragment_metadata;
		imsutils nocall:context/@@indicator_utils;">

		<!-- <div tal:content="python:path('context/@@get_readiness').get_info_for('published')" /> -->
		<!-- <div tal:content="python:path('context/@@get_readiness').is_ready_for('published')" /> -->

		<metal:macro metal:use-macro="context/indicators_macros/macros/active_region">
			<metal:slot metal:fill-slot="content">
				<div class="logic_group">
					<h2 id="general_metadata">General metadata</h2>

					<div class='headed-box'>
						<h5>Responsability and ownership</h5>

						<h6>EEA Contact Info:</h6>
						<tal:def tal:define="fieldname string:contact; fieldset string:Responsability">
							<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
								<metal:slot metal:fill-slot="content">
									<div tal:condition="python:not imsutils.field_has_value(fieldname, context)"
										class="placeholder">
										Please fill in
									</div>
									<div tal:replace="structure context/getContact">...</div>
								</metal:slot>
								<metal:slot metal:fill-slot="extra-metadata">
									<div class="width">800</div>
									<div class="height">435</div>
								</metal:slot>
							</metal:macro>
						</tal:def>

						<h6>Ownership</h6>
						<tal:def tal:define="fieldname string:ownership; fieldset string:Responsability;
							owners context/getOwnership">
							<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
							<metal:slot metal:fill-slot="content">
								<div tal:condition="python:not owners" class="placeholder">
									Please fill in
								</div>
								<ul tal:condition="owners">
									<li tal:repeat="info owners" >
										<a tal:content="python:context.getOrganisationName(info).Title" tal:attributes="href info">EEA</a>
									</li>
								</ul>
							</metal:slot>
							<metal:slot metal:fill-slot="extra-metadata">
								<div class="width">800</div>
								<div class="height">435</div>
							</metal:slot>
						</metal:macro>
					</tal:def>

					</div>

					<div class='headed-box'>
						<h5>Classification</h5>
						<div class="visualClear"><!-- --></div>

						<strong>DPSIR</strong>
						<tal:def tal:define="fieldname string:dpsir; fieldset string:Classification;
							dpsir context/getDpsir">
							<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
								<metal:slot metal:fill-slot="content">
									<div tal:condition="python:not dpsir" class="placeholder">
										Please fill in
									</div>
									<span tal:replace="dpsir" />
								</metal:slot>
								<metal:slot metal:fill-slot="extra-metadata">
									<div class="width">800</div>
									<div class="height">435</div>
								</metal:slot>
							</metal:macro>
						</tal:def>

						<strong>Typology</strong>
						<tal:def tal:define="fieldname string:typology; fieldset string:Classification;
							typology context/getTypology">
							<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
								<metal:slot metal:fill-slot="content">
									<div tal:condition="python:not typology" class="placeholder">
										Please fill in
									</div>
									<span tal:replace="typology" />
								</metal:slot>
								<metal:slot metal:fill-slot="extra-metadata">
									<div class="width">800</div>
									<div class="height">435</div>
								</metal:slot>
							</metal:macro>
						</tal:def>


						<strong>EEA Themes</strong>:
						<tal:def tal:define="fieldname string:themes; fieldset string:Classification;
							themes context/getThemes">
							<div class="portalMessage" tal:condition="not:themes">
								You need to assign a primary theme
							</div>
							<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
								<metal:slot metal:fill-slot="content">
									<div tal:condition="python:not themes" class="placeholder">
										Please fill in
									</div>
									<ul tal:condition="python:themes">
										<li tal:repeat="theme themes" tal:content="theme" />
									</ul>
								</metal:slot>
								<metal:slot metal:fill-slot="extra-metadata">
									<div class="width">800</div>
									<div class="height">435</div>
								</metal:slot>
							</metal:macro>
						</tal:def>
					</div>

					<div class='headed-box'>
						<h5>Identification</h5>
						<div class="wrapper" >
							<div tal:define="codes context/getCodes">

								<strong>CSI Code</strong>
								<tal:def tal:define="fieldname string:codes; fieldset string:Classification;
									dpsir context/getDpsir">
									<metal:macro metal:use-macro="here/indicators_macros/macros/active_field">
										<metal:slot metal:fill-slot="content">
											<div tal:condition="python:not codes" class="placeholder">
												Please fill in
											</div>
											<div tal:repeat="code codes" tal:content="string:${code/set} ${code/code}">
												CSI 001
											</div>
										</metal:slot>
										<metal:slot metal:fill-slot="extra-metadata">
											<div class="width">800</div>
											<div class="height">435</div>
										</metal:slot>
									</metal:macro>
								</tal:def>

							</div>
							<strong>Specification</strong>
							<div>Link: <a href="" tal:attributes="href context/absolute_url"
									tal:content="context/getId">ISpecification1235</a>
							</div>
							<div>
								Version id: <tal:version_id define="getVersions nocall:context/@@getVersions;
												    version_number getVersions/version_number"
											    content="version_number" />
							</div>

							<div>
								First draft created: <span tal:content="context/creation_date">creation date</span>
							</div>

							<div>
								Publish date: <span tal:content="context/effective_date">effective date</span>
							</div>
							<div>
								Last modified: <span tal:content="context/modified">Modified date</span>
							</div>
						</div>
					</div>

				</div>
			</metal:slot>
		</metal:macro>

	</tal:def>
</tal:def>
